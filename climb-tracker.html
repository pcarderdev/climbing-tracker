<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Climb Tracker</title>
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <div class="container">
      <header>
        <h1>CLIMB TRACKER</h1>
        <div class="subtitle">Track progress. Send harder.</div>
      </header>

      <!-- Landing view -->
      <div id="landingView">
        <div class="card">
          <button class="btn-primary" onclick="showSessionSetup()">
            Start Session
          </button>
        </div>

        <div class="stats hidden" id="statsView">
          <div class="stat-card">
            <div class="stat-value" id="totalClimbs">0</div>
            <div class="stat-label">Total Climbs</div>
          </div>
          <div
            class="stat-card"
            onclick="showSessionHistory()"
            style="cursor: pointer"
          >
            <div class="stat-value" id="totalSessions">0</div>
            <div class="stat-label">Sessions</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="sendRate">0%</div>
            <div class="stat-label">Send Rate</div>
          </div>
        </div>
      </div>

      <!-- Active session view -->
      <div id="sessionView" class="hidden">
        <div class="session-info">
          <div class="session-header">
            <div>
              <div class="session-type" id="sessionType"></div>
              <div class="session-gym" id="sessionGym"></div>
              <div class="session-gym" id="sessionDuration">0:00</div>
            </div>
            <button class="btn-secondary btn-small" onclick="endSession()">
              End Session
            </button>
          </div>
        </div>

        <div class="card">
          <button class="btn-primary" onclick="showLogClimb()">
            + Log Climb
          </button>
        </div>

        <div class="stats">
          <div class="stat-card">
            <div class="stat-value" id="sessionClimbs">0</div>
            <div class="stat-label">Climbs</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="sessionSends">0</div>
            <div class="stat-label">Sends</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="sessionHighGrade">-</div>
            <div class="stat-label">High Point</div>
          </div>
        </div>

        <div class="climb-list" id="climbList">
          <div class="empty-state">
            <div class="empty-state-icon">ðŸ§—</div>
            <p>Log your first climb to get started</p>
          </div>
        </div>
      </div>

      <!-- Session History view -->
      <div id="historyView" class="hidden">
        <div class="card">
          <div
            style="
              display: flex;
              justify-content: space-between;
              align-items: center;
              margin-bottom: 20px;
            "
          >
            <h2 style="font-size: 22px; font-weight: 700">Session History</h2>
            <button class="btn-secondary btn-small" onclick="closeHistory()">
              Back
            </button>
          </div>
          <div id="sessionHistoryList" class="climb-list">
            <!-- Will be populated with sessions -->
          </div>
        </div>
      </div>
    </div>

    <!-- Session Setup Modal -->
    <div id="sessionSetupModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title">Start Session</h2>
          <button class="close-btn" onclick="closeModal('sessionSetupModal')">
            &times;
          </button>
        </div>

        <div class="form-group">
          <label>Gym</label>
          <select id="gymSelect">
            <option value="Durham">TRC - Durham</option>
            <option value="Salvage">TRC - Salvage Yard</option>
            <option value="Morrisville">TRC - Morrisville</option>
            <option value="Other">Other</option>
          </select>
        </div>

        <div class="form-group">
          <label>Session Type</label>
          <div class="button-group">
            <button
              class="toggle-btn active"
              onclick="selectSessionType('boulder')"
            >
              Boulder
            </button>
            <button class="toggle-btn" onclick="selectSessionType('rope')">
              Rope
            </button>
          </div>
        </div>

        <div class="modal-actions">
          <button
            class="btn-secondary"
            onclick="closeModal('sessionSetupModal')"
          >
            Cancel
          </button>
          <button class="btn-primary" onclick="startSession()">Start</button>
        </div>
      </div>
    </div>

    <!-- Log Climb Modal -->
    <div id="logClimbModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title">Log Climb</h2>
          <button class="close-btn" onclick="closeModal('logClimbModal')">
            &times;
          </button>
        </div>

        <div class="form-group">
          <label>Grade</label>
          <select id="gradeSelect">
            <!-- Will be populated based on session type -->
          </select>
        </div>

        <div class="form-group">
          <label>Outcome</label>
          <div class="button-group four">
            <button class="toggle-btn" onclick="selectOutcome('warmup')">
              Warmup
            </button>
            <button class="toggle-btn" onclick="selectOutcome('flash')">
              Flash
            </button>
            <button class="toggle-btn" onclick="selectOutcome('send')">
              Send
            </button>
            <button class="toggle-btn" onclick="selectOutcome('fail')">
              Fail
            </button>
          </div>
        </div>

        <div class="form-group" id="styleGroup">
          <label>Style</label>
          <div class="button-group" id="styleButtons">
            <!-- Will be populated based on session type -->
          </div>
        </div>

        <div class="form-group">
          <label>Difficulty</label>
          <div class="star-rating" id="difficultyRating">
            <span class="star" onclick="setDifficulty(1)">â˜†</span>
            <span class="star" onclick="setDifficulty(2)">â˜†</span>
            <span class="star" onclick="setDifficulty(3)">â˜†</span>
            <span class="star" onclick="setDifficulty(4)">â˜†</span>
            <span class="star" onclick="setDifficulty(5)">â˜†</span>
          </div>
        </div>

        <div class="form-group">
          <label>Tags (Optional)</label>
          <div class="tag-group" id="tagGroup">
            <button class="tag-btn" onclick="toggleTag(this)">Crimpy</button>
            <button class="tag-btn" onclick="toggleTag(this)">Powerful</button>
            <button class="tag-btn" onclick="toggleTag(this)">Technical</button>
            <button class="tag-btn" onclick="toggleTag(this)">Slopey</button>
            <button class="tag-btn" onclick="toggleTag(this)">Overhang</button>
            <button class="tag-btn" onclick="toggleTag(this)">Slab</button>
            <button class="tag-btn" onclick="toggleTag(this)">Endurance</button>
            <button class="tag-btn" onclick="toggleTag(this)">Dynamic</button>
          </div>
        </div>

        <div class="form-group">
          <label>Notes (Optional)</label>
          <textarea
            id="climbNotes"
            placeholder="Any thoughts on the climb..."
          ></textarea>
        </div>

        <div class="modal-actions">
          <button class="btn-secondary" onclick="closeModal('logClimbModal')">
            Cancel
          </button>
          <button class="btn-primary" onclick="saveClimb()">Save Climb</button>
        </div>
      </div>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <!-- Firebase Config -->
    <script src="firebase-config.js"></script>

    <!-- App -->
    <script src="climb-tracker.js"></script>
  </body>
</html>
